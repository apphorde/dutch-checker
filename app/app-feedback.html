<template component="app-feedback">
  <div
    class="max-w-4xl mx-auto w-full overflow-y-scroll transition-all duration-300 ease-in-out h-6"
    class-h-64="feedbackOpen"
  >
    <div class="flex items-center justify-between">
      <h2 class="text-md font-bold">Suggestions</h2>
      <button on-click="toggleFeedback()">
        <lucide-icon
          bind-icon="feedbackOpen ? 'x' : 'chevron-up'"
        ></lucide-icon>
      </button>
    </div>

    <template if="feedbackOpen">
      <grammar-results class="block mt-3 mb-4"></grammar-results>
      <grammar-feedback></grammar-feedback>
    </template>
  </div>

  <script setup>
    import { load, defineProp } from "@li3/web";
    import useStore from "@/store.js";

    export default function () {
      const { select, store } = useStore();

      const text = select((s) => s.text);
      const results = select((s) => s.results);
      const checking = select((s) => s.checking);
      const feedbackOpen = select((s) => s.feedbackOpen);

      const { toggleFeedback } = store;

      return { results, checking, text, toggleFeedback, feedbackOpen };
    }
  </script>
</template>
