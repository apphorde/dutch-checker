<template component="history-entry">
  <script setup>
    import { onInit } from "@li3/web";
    import vtt from "https://vtt.jsfn.run/index.mjs";

    export default function () {
      const playing = signal(false);

      function onPlayPause() {
        if (player.value?.paused) {
          player.value.play();
        } else {
          player.value?.pause();
        }

        playing.value = player.value && !player.value?.paused;
      }

      onInit(async function () {
        playbackUrl.value = URL.createObjectURL(audio.value);
        converting.value = true;
        localText.value = await vtt(audio.value);
        converting.value = false;
      });

      return {
        onPlayPause,
        playing,
      };
    }
  </script>
</template>
