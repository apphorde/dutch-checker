<template component="message-list">
  <div class="flex flex-col h-full">
    <div class="overflow-y-scroll">
      <template if="messages.length">
        <div class="flex flex-col gap-4">
          <template for="message of messages">
            <button
              on-click="setText(message.contents)"
              class="rounded px-3 py-2 text-sm"
              class-self-start.bg-gray-100.text-black.border="message.role === 'assistant'"
              class-self-end.bg-blue-500.text-white="message.role === 'user' || !message.role"
              style-max-width="'80%'"
            >
              {{ message.contents }}
            </button>
          </template>
        </div>
      </template>
    </div>
    <div class="flex items-center justify-end">
      <button on-click="newQuestion()" class="flex items-center space-x-2 p-2">
        <lucide-icon size="16" icon="circle-help"></lucide-icon>
        <span class="text-sm">Ask me anything</span>
      </button>
    </div>
  </div>

  <script setup>
    import useStore from "@/store.js";

    export default function () {
      const { select, store } = useStore();
      const { setText, newQuestion } = store;
      const messages = select((s) => s.history || []);

      return { messages, setText, newQuestion };
    }
  </script>
</template>
