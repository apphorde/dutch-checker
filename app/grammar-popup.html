<template component="grammar-popup">
  <div
    class="sm:fixed top-0 right-0 sm:w-2/3 md:w-1/3 h-full z-50 transition-transform duration-300 ease-in-out border-l bg-white shadow-lg flex flex-col"
    class-feedback-open="feedbackOpen"
  >
    <div
      class="flex items-center justify-between px-6 pt-5 pb-4 border-b flex-1"
    >
      <h2 class="text-lg font-bold">Feedback</h2>
      <button on-click="toggleFeedback()" class="flex items-center space-x-2">
        <span class="text-sm">close</span>
        <lucide-icon icon="x"></lucide-icon>
      </button>
    </div>

    <div class="p-6 h-full">
      <grammar-results class="block mb-4"></grammar-results>
      <grammar-feedback></grammar-feedback>
    </div>
  </div>

  <script setup>
    import { load, defineProp } from "@li3/web";
    import useStore from "@/store.js";

    export default function () {
      const { select, store } = useStore();

      const text = select((s) => s.text);
      const results = select((s) => s.results);
      const checking = select((s) => s.checking);
      const feedbackOpen = select((s) => s.feedbackOpen);

      const { toggleFeedback } = store;

      return { results, checking, text, toggleFeedback, feedbackOpen };
    }
  </script>
  <style>
    @media (min-width: 640px) {
      .feedback-open {
        transform: translateX(100%);
      }
    }
  </style>
</template>
