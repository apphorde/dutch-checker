<template component="grammar-popup">
  <div
    class="max-w-4xl mx-auto w-full overflow-y-scroll transition-all duration-300 ease-in-out h-8"
    class-h-64="feedbackOpen"
  >
    <div class="flex items-center justify-between mb-3">
      <h2 class="text-md font-bold">Feedback</h2>
      <button on-click="toggleFeedback()">
        <lucide-icon
          icon="chevron-up"
          class="transform transition-transform duration-300 ease-in-out"
          class-rotate-180="feedbackOpen"
        ></lucide-icon>
      </button>
    </div>

    <grammar-results class="block mb-4"></grammar-results>

    <grammar-feedback></grammar-feedback>
  </div>

  <script setup>
    import { load, defineProp } from "@li3/web";
    import useStore from "@/store.js";

    export default function () {
      const { select, store } = useStore();

      const text = select((s) => s.text);
      const results = select((s) => s.results);
      const checking = select((s) => s.checking);
      const feedbackOpen = select((s) => s.feedbackOpen);

      const { toggleFeedback } = store;

      return { results, checking, text, toggleFeedback, feedbackOpen };
    }
  </script>
</template>
